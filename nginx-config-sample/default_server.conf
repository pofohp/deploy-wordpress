##
# Location: /etc/nginx/sites-available/default_server.conf
# This configuration file defines the default server block.
# It handles requests that do not match any other server_name defined in other configuration files.
# To enable this configuration, create a symbolic link in the sites-enabled
# directory using the following command:
#   sudo ln -s /etc/nginx/sites-available/default_server.conf \
#   /etc/nginx/sites-enabled/
#
# To view the currently enabled symbolic links, run:
#   ls -l /etc/nginx/sites-enabled/
#
# To disable this configuration, remove the symbolic link with:
#   sudo rm /etc/nginx/sites-enabled/default_server.conf
#
# After enabling or disabling, reload Nginx to apply changes:
#   sudo nginx -t && sudo systemctl reload nginx
##


# Default server configuration
#
server {
	listen 80 default_server;
	listen [::]:80 default_server;
	server_name _;
	return 404;
}

server {
	listen 443 ssl default_server;
	listen [::]:443 ssl default_server;
	server_name _;

	# Do NOT use a domain-bound certificate here. This default server is only for direct IP access.
	# Using a domain certificate would leak the real domain behind a CDN when someone inspects 
	# the TLS certificate. Use a self-signed or IP-only certificate instead.
	ssl_certificate /etc/ssl/certs/exclude_domain.crt;
	ssl_certificate_key /etc/ssl/private/exclude_domain.key;
	return 404;
}
